<section class="d-flex align-items-center justify-content-center" style="min-height: 100vh;">
  <div class="container">
    <div class="row">
      <!-- Left Section with Gradient Background -->
      <div class="col-md-6 d-flex align-items-center justify-content-center gradient-left position-relative p-4"
           style="border-radius: 1rem 0 0 1rem;">
        <div class="text-center content">
          <h4 class="fw-bold text-light mb-4" style="font-family: Narnia;">
            Backup Smart Recovery Fast
          </h4>
          <div id="illustrationCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="/assets/images/1.png" class="d-block w-400" alt="Illustration 1" style="max-width: auto;">
              </div>
              <div class="carousel-item">
                <img src="/assets/images/2.png" class="d-block w-400" alt="Illustration 2" style="max-width: auto;">
              </div>
              <div class="carousel-item">
                <img src="/assets/images/3.png" class="d-block w-400" alt="Illustration 3" style="max-width: auto;">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Section with Login/OTP Form -->
      <div class="col-md-6 d-flex align-items-center justify-content-center bg-white p-4"
           style="border-radius: 0 1rem 1rem 0;">
        <div class="w-100" style="max-width: 400px;">
          <img src="/assets/images/KAVACH.png" alt="Data Kavach Logo" 
               class="img-fluid mb-4 mx-auto d-block" style="max-width: 150px;">

          <!-- Login Form (shown when OTP is not required) -->
          <div *ngIf="!showOtp">
            <h2 class="fw-bold text-center text-uppercase mb-4">Login</h2>
            <form [formGroup]="frmValidate" (ngSubmit)="onLoginUser()" novalidate>
              <p class="text-danger text-center" *ngIf="invalidMsg">
                {{ invalidMsg }}
              </p>
              <div class="mb-4">
                <label class="form-label" for="username">E-mail/Mobile</label>
                <input type="text" id="username" class="form-control" formControlName="username"
                       [ngClass]="{'is-invalid': submitted && frmValidate.get('username')?.errors}">
                <div *ngIf="submitted && frmValidate.get('username')?.errors" class="invalid-feedback">
                  <div *ngIf="frmValidate.get('username')?.errors?.['required']">
                    Please enter Email/Mobile
                  </div>
                </div>
              </div>
              <div class="mb-4">
                <label class="form-label" for="password">Password</label>
                <input type="password" id="password" class="form-control" formControlName="password"
                       [ngClass]="{'is-invalid': submitted && frmValidate.get('password')?.errors}">
                <div *ngIf="submitted && frmValidate.get('password')?.errors" class="invalid-feedback">
                  <div *ngIf="frmValidate.get('password')?.errors?.['required']">
                    Please enter Password
                  </div>
                </div>
              </div>
              <div class="mb-3 text-end">
                <a href="#!" class="text-decoration-none">Forgot password?</a>
              </div>
              <button class="btn btn-primary btn-lg w-100" type="submit">
                Log in
              </button>
            </form>
          </div>

          <!-- OTP Form (shown when OTP is required) -->
          <div *ngIf="showOtp">
            <h2 class="fw-bold text-center text-uppercase mb-4">Verify OTP</h2>
            <p class="text-center mb-3">Enter the 6-digit code sent to your registered email</p>
            <p class="text-danger text-center mb-3" *ngIf="invalidMsg">
              {{ invalidMsg }}
            </p>
            
            <form [formGroup]="otpForm" (ngSubmit)="onValidateOtp()" novalidate>
              <div class="mb-4">
                <input type="text" id="otp" class="form-control text-center" formControlName="otp"
                       placeholder="Enter 6-digit OTP" maxlength="6"
                       [ngClass]="{'is-invalid': otpSubmitted && otpForm.get('otp')?.errors}">
                <div *ngIf="otpSubmitted && otpForm.get('otp')?.errors" class="invalid-feedback">
                  <div *ngIf="otpForm.get('otp')?.errors?.['required']">OTP is required</div>
                  <div *ngIf="otpForm.get('otp')?.errors?.['minlength'] || otpForm.get('otp')?.errors?.['maxlength']">
                    OTP must be 6 digits
                  </div>
                </div>
              </div>
              
              <button class="btn btn-primary btn-lg w-100 mb-3" type="submit">
                Verify OTP
              </button>
              
              <div class="text-center">
                <a href="javascript:void(0)" (click)="resendOtp()" class="text-decoration-none fw-bold">
                  Resend OTP
                </a>
                <span class="mx-2">|</span>
                <a href="javascript:void(0)" (click)="goBackToLogin()" class="text-decoration-none fw-bold">
                  Back to Login
                </a>
              </div>
            </form>
          </div>

          <div class="text-center mt-4" *ngIf="!showOtp">
            <p>
              Don't have an account?
              <a href="/register" class="fw-bold text-decoration-none">Register</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>