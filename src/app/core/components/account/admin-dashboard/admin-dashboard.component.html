<div class="container-fluid p-0 d-flex h-100">
  <app-dynamic-menus></app-dynamic-menus>

  <div class="bg-light flex-fill">
    <!-- Mobile Sidebar Toggle -->
    <div class="p-2 d-md-none d-flex text-white bg-success">
      <a href="#" class="text-white" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar">
        <i class="fa-solid fa-bars"></i>
      </a>
      <span class="ms-3">Data Kavach - Admin</span>
    </div>

    <div class="p-4">
      <!-- Navbar with Admin Username -->
      <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm">
        <div class="container-fluid">
          <a class="navbar-brand" href="dashboard" style="float: left;  right: 1px; padding-right: 0px; margin-right: 0px; font-size: 15px;">
            Welcome: {{adminSessionDetails?.username || 'Admin'}}
          </a>
        </div>
      </nav>

      <hr class="my-4">

      <!-- Metrics Section -->
      <div class="row">
        <div class="col">
          <h2 class="section-title mb-4 fw-bold text-primary">
            <i class="fa-solid fa-chart-line me-2"></i> Admin Dashboard
          </h2>

          <!-- Metrics Cards -->
          <div class="metrics-container row g-4" *ngIf="!loading; else loadingTemplate">
            <!-- Total Corporates -->
            <div class="col-md-4">
              <div class="metric-card card shadow-sm bg-dark rounded">
                <div class="card-body p-4">
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa-solid fa-building me-2 text-success fa-2x"></i>
                    <h5 class="metric-name mb-0">Total Corporates</h5>
                  </div>
                  <p class="display-6 mb-0">{{ metrics.totalCorporates }}</p>
                </div>
              </div>
            </div>

            <!-- Total Users -->
            <div class="col-md-4">
              <div class="metric-card card shadow-sm bg-dark rounded">
                <div class="card-body p-4">
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa-solid fa-users me-2 text-success fa-2x"></i>
                    <h5 class="metric-name mb-0">Total Users</h5>
                  </div>
                  <p class="display-6 mb-0">{{ metrics.totalUsers }}</p>
                </div>
              </div>
            </div>

            <!-- Data Storage -->
            <div class="col-md-4">
              <div class="metric-card card shadow-sm bg-dark rounded">
                <div class="card-body p-4">
                  <div class="d-flex align-items-center mb-3">
                    <i class="fa-solid fa-database me-2 text-success fa-2x"></i>
                    <h5 class="metric-name mb-0">Data Storage</h5>
                  </div>
                  <p class="display-6 mb-0">{{ formatSize(metrics.totalStorage) }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Loading Template -->
          <ng-template #loadingTemplate>
            <div class="card shadow-sm p-4 mb-4 bg-dark rounded">
              <div class="text-center mt-4">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </div>
            </div>
          </ng-template>

          <!-- Error Message -->
          <div class="mt-4" *ngIf="errorMessage && !loading">
            <div class="alert alert-danger text-center">
              {{errorMessage}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>